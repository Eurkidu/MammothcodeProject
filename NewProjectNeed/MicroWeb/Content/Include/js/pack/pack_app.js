// mammothcodeJsLib | 0.2.8.3 | 2017年8月7日21:55:09
var Mc={};Mc.App={};Mc.App.Pop={};Mc.Pc={};Mc.Pc.Calendar={};Mc.Pc.Pop={};Mc.Util={};Mc.Util.Check={};Mc.Check={};Mc.Util.Date={};Mc.Util.String={};Mc.Util.Uri={};Mc.Global={};Mc.Pop={};Mc.Global.mc_isAjax={};Mc.Config={};Mc.Config.AjaxUrl="";Mc.Ajax=function(n){function r(){var n=null;$.ajax({url:t.api?Mc.Config.AjaxUrl+t.url:t.url,data:$.extend(t.data,{Token:getMemberToken()}),type:t.type,async:t.async,timeout:t.timeout,processData:t.processData,success:function(r,u){var f=$.Deferred(),e;if(typeof r=="string")try{r=JSON.parse(r)}catch(o){}t.hasLoading?(e=(new Date).getTime()-n,e<300?setTimeout(function(){f.resolve()},300-e):f.resolve()):f.resolve();f.then(function(){t.hasLoading&&window.closeWeLoading();Mc.Global.mc_isAjax[t.id]=!1;r.issuccess===!0?(t.success.call(this,r,u),i.resolve(r)):r.issuccess===!1?(t.fail.call(this,r,u),i.reject(r)):(t.success.call(this,r,u),i.resolve(r))})},error:function(n){t.hasLoading&&window.closeWeLoading();Mc.Global.mc_isAjax[t.id]=!1;t.error.call(this,n)},complete:function(n){t.hasLoading&&window.closeWeLoading();Mc.Global.mc_isAjax[t.id]=!1;t.complete.call(this,n)},beforeSend:function(i){n=(new Date).getTime();t.hasLoading&&window.showWeLoading();Mc.Global.mc_isAjax[t.id]=!0;t.beforeSend.call(this,i)}})}var i=$.Deferred(),t=$.extend({id:parseInt((new Date).getTime()+""+Math.random()*1e4).toString(36),hasLoading:!1,confirmTitle:!1,api:!0,url:"",data:{},type:"post",async:!0,timeout:0,processData:!0,success:function(){},fail:function(){},error:function(){},complete:function(){},beforeSend:function(){}},n);return Mc.Global.mc_isAjax[t.id]||(Mc.Global.mc_isAjax[t.id]=!1),Mc.Global.mc_isAjax[t.id]||(t.confirmTitle?Mc.Pc.Pop.Dialog({wrapClass:"mc-confirm-pop-cotar",popHtml:'<div class="mc-pop-content">'+t.confirmTitle+"<\/div>",leftBtnClass:" fp confirm-l",rightBtnClass:" fp confirm-r",leftBtnCallback:function(){r()}}):r()),i},function(n){var t={index:0,isStart:[],interValObj:[],init:function(n,i){return function(){t.start(n,i)}()},start:function(n,i){var r=t.index;t.isStart[r]||(t.isStart[r]=!0,typeof i.startCallback=="function"&&i.startCallback(),t.interValObj[r]=window.setInterval(function(){i.fixTime<=0?(window.clearInterval(t.interValObj[r]),n.html(i.defaultTxt),typeof i.endCallback=="function"&&i.endCallback(),t.isStart[r]=!1):(i.fixTime--,n.html(t.format(i)))},1e3),t.index++)},format:function(n){var i=new Date(parseInt(n.fixTime)*1e3).getTime(),r=parseInt(i/864e5),u=parseInt(i/36e5%24),f=parseInt(i/6e4%60),e=parseInt(i/1e3%60),t=n.timeFormat;return/(d+天).*?(H+时).*?(m+分).*?(s+秒)/.test(t)&&(t=t.replace(RegExp.$1,r==0?"":r+"天"),t=t.replace(RegExp.$2,u==0?"":u+"时"),t=t.replace(RegExp.$3,f==0?"":f+"分"),t=t.replace(RegExp.$4,e==0?"":e+"秒")),t}};n.fn.timeCountDown=function(i){var r=n.extend({fixTime:60,timeFormat:"dd天HH时mm分ss秒",startCallback:function(){},endCallback:function(){},defaultTxt:"倒计时已结束"},i);t.init(this,r)}}(jQuery),function(n){var t={dlData:null,getArgs:function(i){t.dlData=n(i).prop("dl")},init:function(i,r){return function(){if(n(i).prop("dl",{isAjax:!1,pageIndex:0,loadedItem:null,lastItem:null}),t.getArgs(i),r.isLoadFirst?t.ajaxNewData(i,r,0):t.dlData.pageIndex=1,r.touchOptimize)n(r.scrollItem).off("touchmove").on("touchmove",function(){t.pageDown(i,r)});n(r.scrollItem).off("scroll").on("scroll",function(){t.pageDown(i,r)});t.dlData.loadedItem=i.find(r.loadItem);t.dlData.lastItem=t.dlData.loadedItem.eq(t.dlData.loadedItem.length-1)}()},pageDown:function(i,r){if(!t.dlData.isAjax&&t.dlData.lastItem&&t.dlData.lastItem.offset().top+t.dlData.lastItem.height()-n(window).scrollTop()<n(window).height()){t.dlData.isAjax=!0;var u=t.dlData.loadedItem.length;t.dlData.pageIndex=Math.ceil(u/r.pageSize)+1;t.ajaxNewData(i,r,u)}},ajaxNewData:function(i,r,u){n.ajax({type:r.type,url:r.url,data:n.extend({pageSize:r.pageSize,pageIndex:t.dlData.pageIndex},r.data),async:r.async,success:function(n){n=JSON.parse(n);r.success.call(i,n.data);t.dlData.loadedItem=i.find(r.loadItem);t.dlData.lastItem=t.dlData.loadedItem.eq(t.dlData.loadedItem.length-1);n.allCount<=u?(t.dlData.isAjax=!0,r.noMore.call(i,n)):t.dlData.isAjax=!1},beforeSend:function(){t.dlData.isAjax=!0;r.beforeSend.call(i)}})}};n.fn.dropDownLoad=function(i){var r=n.extend({scrollItem:document,loadItem:"li",pageSize:15,isLoadFirst:!1,touchOptimize:!1,type:"post",async:!0,url:"",data:{},success:function(){},beforeSend:function(){},noMore:function(){}},i);t.init(this,r);t.obj=this}}(jQuery);Mc.DropDownLoad=function(n){var i=$.extend({scrollItem:window,loadItem:"li",pageSize:15,isLoadFirst:!1,touchOptimize:!1,type:"post",async:!0,url:"",data:{},api:!0,onInit:null,onRefreshPage:null,noMoreJudge:function(n){return!n.data.length},success:function(){},beforeSend:function(){},noMore:function(){}},n),r=this,u=null,f=$(i.scrollItem),t={dlData:null,getArgs:function(){t.dlData=r.dlData},updateData:function(n,i){var r=n.find(i.loadItem);t.dlData.loadedItemLength=r.length;r.length&&(t.dlData.lastItem=r.eq(t.dlData.loadedItemLength-1))},init:function(n,i){return function(){t.initData();typeof i.onInit=="function"&&i.onInit.call(n);t.loadFirst(n,i);t.bindEvent(n,i)}()},initData:function(){r.dlData||(r.dlData={isAjax:!1,pageIndex:1,loadedItemLength:null,lastItem:null},t.getArgs())},loadFirst:function(n,i,r){r||i.isLoadFirst?t.ajaxNewData(n,i,0):t.dlData.pageIndex=2;t.updateData(n,i)},bindEvent:function(n,i){if(i.touchOptimize)f.off("touchmove").on("touchmove",function(){t.pageDown(n,i)});f.off("scroll").on("scroll",function(){t.pageDown(n,i)})},pageDown:function(n,i){if(!t.dlData.isAjax&&t.dlData.lastItem&&t.dlData.lastItem.offset().top+t.dlData.lastItem.height()-f.scrollTop()-200<f.height()){t.dlData.isAjax=!0;var r=t.dlData.loadedItemLength;t.dlData.pageIndex=Math.ceil(r/i.pageSize)+1;t.ajaxNewData(n,i)}},ajaxNewData:function(n,i,r){var f=$.Deferred(),e="",u;return e=typeof i.url=="function"?i.url():i.url,u={},u=typeof i.data=="function"?i.data():i.data,Mc.Ajax({type:i.type,api:i.api,url:e,data:$.extend({pageSize:i.pageSize,pageIndex:t.dlData.pageIndex},u),async:i.async,success:function(u){u.loadingPageIndex=t.dlData.pageIndex;r?(t.dlData.isAjax=!1,f.resolve(u)):(i.noMoreJudge(u,t.dlData.loadedItemLength)?(t.dlData.isAjax=!0,i.noMore.call(n,u)):t.dlData.isAjax=!1,i.success.call(n,u),t.updateData(n,i))},beforeSend:function(){t.dlData.isAjax=!0;i.beforeSend.call(n)}}),f}};r.init=function(n,r){r&&r.data&&(r.data=$.extend(i.data,r.data));i=$.extend(i,r);u=$(n);t.init(u,i)};r.changeAjaxData=function(n){i.data=n};r.addAjaxData=function(n){i.data=$.extend(i.data,n)};r.delAjaxData=function(n){$.each(n,function(n,t){delete i.data[t]})};r.refreshPage=function(){t.dlData.pageIndex=1;typeof i.onRefreshPage=="function"&&i.onRefreshPage.call(u);t.loadFirst(u,i,!0)};r.ajaxData=function(n){var r=$.Deferred();return n&&n.data&&(n.data=$.extend(i.data,n.data)),i=$.extend(i,n),t.initData(),t.ajaxNewData(this,i,!0).then(function(n){r.resolve(n)}),r}};Mc.DropDownHook=function(n){function o(){return e}function c(n){e=n}function l(){var n="mc_hook"+parseInt((new Date).getTime()+""+Math.random()*1e4).toString(36),i='<div id="'+n+'" class="mc-hook"><\/div>';r.$targetList.append(i);t=$("#"+n)}function s(){u||t&&t.offset().top-r.$scrollItem.scrollTop()<r.$scrollItem.height()+i.triggerHeight&&f.trigger("hook",o())}function h(){u||t&&t.offset().top<r.$scrollItem.offset().top+r.$scrollItem.height()+i.triggerHeight&&f.trigger("hook",o())}function a(){if(i.touchOptimize)r.$scrollItem.off("touchmove").on("touchmove",function(){i.scrollItem===window?s():h()});r.$scrollItem.off("scroll").on("scroll",function(){i.scrollItem===window?s():h()})}function v(){l();a()}var i=$.extend({scrollItem:window,targetList:"#list_wrap",triggerHeight:10,touchOptimize:!1},n),f=$(this),r={$scrollItem:$(i.scrollItem),$targetList:$(i.targetList)},t=null,u=!1,e={};this.initHook=function(){return v(),this};this.disable=function(){return u=!0,this};this.enable=function(){return u=!1,this};this.setData=function(n){return c(n),this};this.addBefore=function(n){return t===null?(console.error("未初始化钩子"),this):(t.before(n),this)};this.cleanBefore=function(){return t===null?(console.error("未初始化钩子"),this):(t.prevAll().remove(),this)};this.addAfter=function(n){return t===null?(console.error("未初始化钩子"),this):(t.after(n),this)};this.cleanAfter=function(){return t===null?(console.error("未初始化钩子"),this):(t.nextAll().remove(),this)};this.$=f},function(n){var t={msData:null,getArgs:function(i){t.msData=n(i).prop("ms")},init:function(i,r){return function(){n(i).prop("ms",{isAjax:!1,pageCount:0,pageIndex:1});t.getArgs(i);r.isLoadFirst?t.ajaxNewData(i,n.extend(r,{async:!1})):t.msData.pageCount=Math.ceil(r.allCount/r.pageSize);t.msData.pageCount>0&&(t.fillHtml(i,{current:t.msData.pageIndex,pageCount:t.msData.pageCount}),t.bindEvent(i,r))}()},fillHtml:function(n,t){return function(){n.empty();t.current>1?n.append('<div class="item fp btn prevPage"><span><<\/span><\/div>'):(n.remove(".prevPage"),n.append('<div class="item fp btn disable"><span><<\/span><\/div>'));t.current!=1&&t.current>=4&&t.pageCount!=4&&n.append('<div class="item fp tcdNumber"><span>1<\/span><\/div>');t.current-2>2&&t.current<=t.pageCount&&t.pageCount>5&&n.append('<div class="item fp ellipsis"><span>...<\/span><\/div>');var i=t.current-2,r=t.current+2;for((i>1&&t.current<4||t.current==1)&&r++,t.current>t.pageCount-4&&t.current>=t.pageCount&&i--;i<=r;i++)i<=t.pageCount&&i>=1&&(i!=t.current?n.append('<div class="item fp tcdNumber"><span>'+i+"<\/span><\/div>"):n.append('<div class="item fp active"><span>'+i+"<\/span><\/div>"));t.current+2<t.pageCount-1&&t.current>=1&&t.pageCount>5&&n.append('<div class="item fp ellipsis"><span>...<\/span><\/div>');t.current!=t.pageCount&&t.current<t.pageCount-2&&t.pageCount!=4&&n.append('<div class="item fp tcdNumber"><span>'+t.pageCount+"<\/span><\/div>");t.current<t.pageCount?n.append('<div class="item fp btn nextPage"><span>><\/span><\/div>'):(n.remove(".nextPage"),n.append('<div class="item fp btn disable"><span>><\/span><\/div>'))}()},bindEvent:function(i,r){return i.off("click"),function(){i.on("click","div.tcdNumber",function(){var u=parseInt(n(this).text());t.fillHtml(i,{current:u,pageCount:t.msData.pageCount});typeof r.backFn=="function";t.msData.pageIndex=u;t.ajaxNewData(i,r)});i.on("click","div.prevPage",function(){var n=parseInt(i.find(".item.active").text());t.fillHtml(i,{current:n-1,pageCount:t.msData.pageCount});typeof r.backFn=="function";t.msData.pageIndex=n-1;t.ajaxNewData(i,r)});i.on("click","div.nextPage",function(){var n=parseInt(i.find(".item.active").text());t.fillHtml(i,{current:n+1,pageCount:t.msData.pageCount});typeof r.backFn=="function";t.msData.pageIndex=n+1;t.ajaxNewData(i,r)});i.on("click","div.firstPage",function(){var n=0;t.fillHtml(i,{current:n+1,pageCount:t.msData.pageCount});typeof r.backFn=="function";t.msData.pageIndex=n+1;t.ajaxNewData(i,r)});i.on("click","div.lastPage",function(){var n=r.pageCount-1;t.fillHtml(i,{current:n+1,pageCount:t.msData.pageCount});typeof r.backFn=="function";t.msData.pageIndex=n+1;t.ajaxNewData(i,r)})}()},ajaxNewData:function(i,r){n.ajax({type:r.type,url:r.url,data:n.extend({pageSize:r.pageSize,pageIndex:t.msData.pageIndex},r.data),async:r.async,success:function(n){t.msData.pageCount=Math.ceil(n.allCount/r.pageSize);r.success.call(i,n)},beforeSend:function(){t.msData.isAjax=!0;r.beforeSend.call(i)}})}};n.fn.createPage=function(i){var r=n.extend({allCount:10,pageSize:12,isLoadFirst:!0,type:"post",async:!0,url:"",data:{},success:function(){},beforeSend:function(){}},i);t.init(this,r)}}(jQuery);Mc.Pop.Loading=function(n){function u(){return'<div class="weui_loading_toast">            <div class="weui_mask_transparent"><\/div>            <div class="weui_toast">                <div class="weui_loading">                    <div class="weui_loading_leaf weui_loading_leaf_0"><\/div>                    <div class="weui_loading_leaf weui_loading_leaf_1"><\/div>                    <div class="weui_loading_leaf weui_loading_leaf_2"><\/div>                    <div class="weui_loading_leaf weui_loading_leaf_3"><\/div>                    <div class="weui_loading_leaf weui_loading_leaf_4"><\/div>                    <div class="weui_loading_leaf weui_loading_leaf_5"><\/div>                    <div class="weui_loading_leaf weui_loading_leaf_6"><\/div>                    <div class="weui_loading_leaf weui_loading_leaf_7"><\/div>                    <div class="weui_loading_leaf weui_loading_leaf_8"><\/div>                    <div class="weui_loading_leaf weui_loading_leaf_9"><\/div>                    <div class="weui_loading_leaf weui_loading_leaf_10"><\/div>                    <div class="weui_loading_leaf weui_loading_leaf_11"><\/div>                <\/div>                <p class="weui_toast_content">{{text}}<\/p>            <\/div>        <\/div>'}var t=$.extend({isUseIdTemplate:!1,externalTemplate:null,externalData:{text:"数据加载中"},isShow:!1},n),r,i;t.isUseIdTemplate===!0?i=$(template(t.externalTemplate,t.externalData)):(r=t.externalTemplate?t.externalTemplate:u(),i=$(template.compile(r)(t.externalData)));t.isShow||i.hide();$(function(){$("body").append(i)});this.show=function(){i.show()};this.hide=function(){i.hide()};this.remove=function(){i.remove()}};Mc.App.Pop.Tip=function(n){var t=$.extend({txtContent:"",fadeSpeed:100,tipLive:2e3,callback:null},n),r=(new Date).getTime(),u=function(){var n="";return n+="<div id='tip"+r+"' class='pop-position-wrap' style='display:none;'>",n+="<div class='tip-wrap'>",n+="<div class='tip-content'>",n+=t.txtContent,n+"<\/div>"},i;$("body").append(u);i=$("#tip"+r);i.show(function(){var n=i.find(".tip-content");n.addClass("active");setTimeout(function(){n.removeClass("active");setTimeout(function(){typeof t.callback=="function"&&t.callback();i.remove()},300)},t.tipLive)})};Mc.Pc.Pop.Dialog=function(n){function u(){(t.fadeOutCallback==null||typeof t.fadeOutCallback=="function"&&t.fadeOutCallback()!==!1)&&r.fadeOut(t.fadeSpeed,function(){r.remove()})}var t=$.extend({wrapClass:"",popHtml:"",iniCallback:null,leftBtn:!0,leftBtnClass:"",leftBtnContent:"确认",leftBtnCallback:null,rightBtn:!0,rightBtnClass:"",rightBtnContent:"取消",rightBtnCallback:null,closeBtn:!0,closeBtnClass:"",hasBg:!0,bgClose:!1,bgCloseCallback:null,otherClose:"",otherCloseCallback:null,fadeOutCallback:null,fadeSpeed:200},n),i=(new Date).getTime(),e=function(){var n="";return n+="<div id='Dialog"+i+"' class='pop-position-wrap' style='display:none;'>",n+="<div class='pop-wrap "+t.wrapClass+"'>",t.closeBtn&&(n+="<div id='close_"+i+"' class='pop-close "+t.closeBtnClass+"' onclick='(function(){})'><\/div>"),n+=t.popHtml,(t.leftBtn||t.rightBtn)&&(n+="<div class='btn-wrap'>"),t.leftBtn&&(n+="<div id='dialog_L_"+i+"' class='btn"+t.leftBtnClass+"'>"+t.leftBtnContent+"<\/div>"),t.rightBtn&&(n+="<div id='dialog_R_"+i+"' class='btn"+t.rightBtnClass+"'>"+t.rightBtnContent+"<\/div>"),(t.leftBtn||t.rightBtn)&&(n+="<\/div>"),t.hasBg&&(n+="<\/div><div id='bg_"+i+"' class='pop-bg'><\/div>"),n+"<\/div>"},f=$("[id^=Dialog]:hidden"),r;if(f.length!==0&&f.remove(),$("body").append(e),r=$("#Dialog"+i),(t.iniCallback==null||typeof t.iniCallback=="function"&&t.iniCallback()!==!1)&&r.fadeIn(t.fadeSpeed),t.leftBtn)r.on("click","#dialog_L_"+i,function(){(t.leftBtnCallback==null||typeof t.leftBtnCallback=="function"&&t.leftBtnCallback()!==!1)&&u()});if(t.rightBtn)r.on("click","#dialog_R_"+i,function(){(t.rightBtnCallback==null||typeof t.rightBtnCallback=="function"&&t.rightBtnCallback()!==!1)&&u()});if(t.closeBtn)r.on("click","#close_"+i,function(){u()});if(t.bgClose)r.on("click","#bg_"+i,function(){(t.bgCloseCallback==null||typeof t.bgCloseCallback=="function"&&t.bgCloseCallback()!==!1)&&u()});if(t.otherClose!=="")r.on("click",t.otherClose,function(){(t.otherCloseCallback==null||typeof t.otherCloseCallback=="function"&&t.otherCloseCallback()!==!1)&&u()})};Mc.Pc.Pop.DialogForm=function(n){function u(){(t.fadeOutCallback==null||typeof t.fadeOutCallback=="function"&&t.fadeOutCallback()!==!1)&&r.fadeOut(t.fadeSpeed,function(){r.remove()})}var t=$.extend({formAction:"",formMethod:"",wrapClass:"",popHtml:"",iniCallback:null,leftBtn:!0,leftBtnClass:"",leftBtnContent:"确认",leftBtnCallback:null,rightBtn:!0,rightBtnClass:"",rightBtnContent:"取消",rightBtnCallback:null,hasBg:!0,bgClose:!1,bgCloseCallback:null,otherClose:"",otherCloseCallback:null,fadeOutCallback:null,fadeSpeed:200},n),i=(new Date).getTime(),e=function(){var n="";return n+="<div id='Dialog"+i+"' class='pop-position-wrap' style='display:none;'>",n+="<div class='pop-wrap "+t.wrapClass+"'>",n+="<form action='"+t.formAction+"' method='"+t.formMethod+'\' target="_blank">',n+=t.popHtml,t.leftBtn&&(n+="<input type='submit' id='dialog_L_"+i+"' class='btn "+t.leftBtnClass+"' value='"+t.leftBtnContent+"'>"),t.rightBtn&&(n+="<input type='submit' id='dialog_R_"+i+"' class='btn "+t.rightBtnClass+"' value='"+t.rightBtnContent+"'>"),t.hasBg&&(n+="<\/form><\/div><div id='bg_"+i+"' class='pop-bg'><\/div>"),n+"<\/div>"},f=$("[id^=Dialog]:hidden"),r;f.length!==0&&f.remove();$("body").append(e);r=$("#Dialog"+i);(t.iniCallback==null||typeof t.iniCallback=="function"&&t.iniCallback()!==!1)&&r.fadeIn(t.fadeSpeed);r.on("click","#dialog_L_"+i,function(){(t.leftBtnCallback==null||typeof t.leftBtnCallback=="function"&&t.leftBtnCallback()!==!1)&&u()});r.on("click","#dialog_R_"+i,function(){(t.rightBtnCallback==null||typeof t.rightBtnCallback=="function"&&t.rightBtnCallback()!==!1)&&u()});if(t.bgClose)r.on("click","#bg_"+i,function(){(t.bgCloseCallback==null||typeof t.bgCloseCallback=="function"&&t.bgCloseCallback()!==!1)&&u()});if(t.otherClose!=="")r.on("click",t.otherClose,function(){(t.otherCloseCallback==null||typeof t.otherCloseCallback=="function"&&t.otherCloseCallback()!==!1)&&u()})};Mc.Pc.Pop.Loading=function(n){function e(){(t.fadeOutCallback==null||typeof t.fadeOutCallback=="function"&&t.fadeOutCallback()!==!1)&&i.fadeOut(t.fadeSpeed,function(){i.remove()})}var t=$.extend({wrapClass:"",loadingClass:"loading-cotar",loadingTxt:"载入中...",hasBg:!0,fadeOutCallback:null,fadeSpeed:200},n),r=(new Date).getTime(),f=function(){var n="";return n+="<div id='Loading"+r+"' class='pop-position-wrap' style='display:none;'>",n+="<div class='pop-wrap "+t.wrapClass+"'>",n+="<div class='"+t.loadingClass+"'>",n+=t.loadingTxt,t.hasBg&&(n+="<\/div><\/div><div id='bg_"+r+"' class='pop-bg'><\/div>"),n+"<\/div>"},i,u;$("body").append(f);i=$("#Loading"+r);i.fadeIn(t.fadeSpeed);u=this;u.removeLoading=function(){e()}};Mc.Pc.Calendar.SignCal={iniCal:function(n){function u(){var i="签到回调函数必须返回如下格式数据: {\r\n year:签到年份,\r\n month:签到月份,\r\n signList:对应月份签到列表(包括签到当天),\r\n state:签到成功与否(true/false)\r\n }\r\n",n;if(t.signInBtnCallBack==null||typeof t.signInBtnCallBack!="function")console.error(i),t.signInFailCallBack==null||typeof t.signInFailCallBack=="function"&&t.signInFailCallBack();else{if(n=t.signInBtnCallBack(),Mc.Util.isNull(n.year)||Mc.Util.isNull(n.month)||Mc.Util.isNull(n.signList)){console.error(i);return}n.state==!0?t.signInSuccessCallBack==null||typeof t.signInSuccessCallBack=="function"&&t.signInSuccessCallBack():t.signInFailCallBack==null||typeof t.signInFailCallBack=="function"&&t.signInFailCallBack();Mc.Pc.Calendar.SignCal.updateCal({iYear:n.year,iMonth:n.month,signList:n.signList});$("#sign_year_select>input").val(n.year);$("#sign_year_select>div").html(n.year);$("#sign_month_select>input").val(n.month);$("#sign_month_select>div").html(n.month)}}var i=new Date,t=$.extend({target:"",iYear:i.getFullYear(),iMonth:i.getMonth()+1,iDay:i.getDate(),signList:"",iniCallBack:null,yearSelectCallBack:null,monthSelectCallBack:null,otherSignInBtn:"",signInBtnCallBack:null,signInSuccessCallBack:null,signInFailCallBack:null},n),f=Mc.Pc.Calendar.SignCal.drawCal({iYear:t.iYear,iMonth:t.iMonth,iDay:t.iDay,signList:t.signList}),r;$(t.target).html(f);r=$("#sign_layer");(t.iniCallback==null||typeof t.iniCallback=="function"&&t.iniCallback()!==!1)&&(Mc.Util.selectMenu("#sign_year_select",function(){var i={year:$("#sign_year_select>input").val(),month:$("#sign_month_select>input").val()},n=parseInt(parseInt((i.year-t.iYear)*12)+parseInt(i.month-t.iMonth));n>0?$(".top-tip").html("(M+"+n+")月"):n<0?$(".top-tip").html("(M"+n+")月"):$(".top-tip").html("（M）月");t.yearSelectCallBack(i)}),Mc.Util.selectMenu("#sign_month_select",function(){var i={year:$("#sign_year_select>input").val(),month:$("#sign_month_select>input").val()},n=parseInt(parseInt((i.year-t.iYear)*12)+parseInt(i.month-t.iMonth));n>0?$(".top-tip").html("(M+"+n+")月"):n<0?$(".top-tip").html("(M"+n+")月"):$(".top-tip").html("（M）月");t.monthSelectCallBack(i)}),r.show());r.on("click","#sign_in_btn,.now-day",function(){u()});if(!Mc.Util.isNull(t.otherSignInBtn))$(document).on("click",t.otherSignInBtn,function(){u()})},drawCal:function(n){var f=new Date,i=$.extend({iYear:f.getFullYear(),iMonth:f.getMonth()+1,iDay:f.getDate(),signList:""},n),t=[],r,u,e;for(t.push("<div class='sign_main' id='sign_layer' style='display:none;'>"),t.push("<div class='sign_succ_calendar_title'>"),t.push("<div class='select-box' id='sign_year_select'><input type='hidden' value='"+i.iYear+"'><div>"+i.iYear+"年<\/div><ul style='display:none;'>"),r=2015;r<2050;r++)t.push("<li mc-select-value='"+r+"'>"+r+"年<\/li>");for(t.push("<\/ul><\/div>"),t.push("<div class='select-box' id='sign_month_select'><input type='hidden' value='"+i.iMonth+"'><div>"+i.iMonth+"月<\/div><ul style='display:none;'>"),u=1;u<13;u++)t.push("<li mc-select-value='"+u+"'>"+u+"月<\/li>");return t.push("<\/ul><\/div>"),e="M",t.push("<div class='top-tip'>("+e+")月<\/div>"),t.push("<\/div>"),t.push("<div class='sign' id='sign_cal'>"),t.push(Mc.Pc.Calendar.SignCal.getCalDataHtml(i.iYear,i.iMonth,i.iDay,i.signList)),t.push("<\/div>"),t.push("<\/div>"),t.join("")},updateCal:function(n){var i=new Date,t=$.extend({iYear:i.getFullYear(),iMonth:i.getMonth()+1,iDay:i.getDate(),signList:"",callBack:null},n),r=$("#sign_cal");r.html(Mc.Pc.Calendar.SignCal.getCalDataHtml(t.iYear,t.iMonth,t.iDay,t.signList));t.callBack==null||typeof t.callBack=="function"&&t.callBack()},getCalDataHtml:function(n,t,i,r){function c(n,t){var i=!1;return $.each(n,function(n,r){if(r===t)return i=!0,!1}),i}var e=Mc.Util.Date.getCalendar({iYear:n,iMonth:t}),u=[],f,s,h,o;for(u.push("<table>"),u.push("<tr>"),u.push("<th class='col-1'><span>"+e[0][0]+"<\/span><\/th>"),u.push("<th class='col-2'><span>"+e[0][1]+"<\/span><\/th>"),u.push("<th class='col-3'><span>"+e[0][2]+"<\/span><\/th>"),u.push("<th class='col-4'><span>"+e[0][3]+"<\/span><\/th>"),u.push("<th class='col-5'><span>"+e[0][4]+"<\/span><\/th>"),u.push("<th class='col-6'><span>"+e[0][5]+"<\/span><\/th>"),u.push("<th class='col-7'><span>"+e[0][6]+"<\/span><\/th>"),u.push("<\/tr>"),s=1;s<7;s++){for(u.push("<tr class='row-"+s+"'>"),f=1;f<8;f++)h=c(r,e[s][f-1]),o=isNaN(e[s][f-1])?"":e[s][f-1],h?e[s][f-1]==i?u.push("<td mc-cal-value='"+o+"' class='col-"+f+" on now-day'><span>"+o+"<\/span><\/td>"):u.push("<td mc-cal-value='"+o+"' class='col-"+f+" on'><span>"+o+"<\/span><\/td>"):Mc.Util.isNull(o)?u.push("<td mc-cal-value='"+o+"' class='col-"+f+" other-month'><span>"+o+"<\/td>"):e[s][f-1]==i?u.push("<td mc-cal-value='"+o+"' class='col-"+f+" now-day'><span>"+o+"<\/span><\/td>"):u.push("<td mc-cal-value='"+o+"' class='col-"+f+"'><span>"+o+"<\/span><\/td>");u.push("<\/tr>")}return u.push("<\/table>"),u.join("")},setSignIn:function(n){var i=$("#sign_cal"),t=i.find("[mc-cal-value='"+n+"']");return t.hasClass("on")?!1:(t.addClass("on"),!0)}};Mc.Util.preventScroll=function(n){var t=document.getElementById(n);return t!=null&&(navigator.userAgent.indexOf("Firefox")>0?t.addEventListener("DOMMouseScroll",function(n){t.scrollTop+=n.detail>0?60:-60;n.preventDefault()},!1):t.onmousewheel=function(n){return n=n||window.event,t.scrollTop+=n.wheelDelta>0?-60:60,!1}),this};Mc.Util.selectMenu=function(n,t){var i=$(n),u=$(n).find("input"),f=$(n).find("div"),r=i.find("ul");i.on("click",function(n){i.trigger("selectBoxClick");var t=$(this);t.hasClass("open")?(t.removeClass("open"),r.hide()):(t.addClass("open"),r.show());n.stopPropagation()});i.on("click","li",function(n){var e=$(this),o=e.text(),s=e.attr("mc-select-value");f.html(o);u.val(s);t!=null&&t(this,o);r.hide();i.removeClass("open");n.stopPropagation()});$(document).click(function(){r.hide();i.removeClass("open")})};Mc.Util.selectBox=function(n){function f(n,t){o.val(n[1]);c.text(n[0]);t&&r.callback!=null&&r.callback(n[1],n[0])}function e(){u=t.find("li")}function h(n){for(var r="",i=0;i<n.length;i++)r+='<li mc-select-value="'+n[i][1]+'">'+n[i][0]+"<\/li>";t.append(r);e()}var r=$.extend({target:"",group:"McSelectBox",callback:null},n),i=$(r.target),o=i.find("input"),c=i.find("div"),t=i.find("ul"),u=t.find("li"),s=[];(function(){i.hasClass("mc-active")||t.hide();i.attr("mc-group",r.group)})();i.on("click",function(n){if(u.length){var i=$(this);i.hasClass("mc-active")?(t.hide(),i.removeClass("mc-active")):($("[mc-group="+r.group+"]").removeClass("mc-active").find("ul").hide(),i.addClass("mc-active"),t.show());n.stopPropagation()}});i.on("click","li",function(n){var u=$(this),e=u.text(),o=u.attr("mc-select-value");f([e,o]);r.callback!=null&&r.callback(o,e);t.hide();i.removeClass("mc-active");n.stopPropagation()});return $(document).click(function(){t.hide();i.removeClass("mc-active")}),{hasValue:function(){return Mc.Util.isNull(o.val())?!1:!0},setDefaultValue:function(n){f(n)},setSelect:function(n,t){var i=u.eq(n),r,e;if(i.length)r=i.attr("mc-select-value"),e=i.text(),f([e,r],t);else return!1},setSelectByTxt:function(n,t){var r=this,i=!1;return u.each(function(u,f){if($(f).text()==n)return i=!0,r.setSelect(u,t),!1}),i},setSelectByValue:function(n,t){var r=this,i=!1;return u.each(function(u,f){if($(f).attr("mc-select-value")==n)return i=!0,r.setSelect(u,t),!1}),i},getSelectedValue:function(){var n=o.val(),t=c.text();return{mcSelectValue:Mc.Util.isNull(n)?null:n,txt:Mc.Util.isNull(t)?null:t}},getOptionLength:function(){return u.length},addOption:function(n,t){s.push([n,t])},addOptionList:function(n){h(n)},changeOptionList:function(n){t.html("");h(n)},removeOption:function(n){u.eq(n).remove();e()},removeAllOption:function(){t.html("");e()},empty:function(){t.html("");e();f(["",""],!1)},updateSelectBox:function(){h(s);s=[]}}};Mc.Util.EffectChange=function(n){function a(n){n.addClass("mc-active");(c[t.effect]||r.startShowHide)(n)}function s(n){n.removeClass("mc-active");var i="SH";t.event!=="hover"&&(i=t.effect);(l[i]||r.endShowHide)(n)}function v(){u.each(function(n,i){var r=$(i),u=r.attr("mc-efc-btn"),o=f.filter("[mc-efc-page="+u+"]"),s;e[u]={$btn:r,$page:o};s=t.defaultItem?t.defaultItem.indexOf(u)!==-1:r.hasClass("mc-active");s?(r.addClass("mc-active "+t.btnExtraClass),o.addClass("mc-active")):o.hide()});i.on(t.event,"[mc-efc-btn]",function(){var n=$(this),h=n.attr("mc-efc-btn"),i=e[h].$page,r=u.filter(".mc-active"),c=f.filter(".mc-active"),l=r.length>1;n.hasClass("mc-active")&&(o||l)?(t.changeCallBack==null||typeof t.changeCallBack=="function"&&t.changeCallBack()!==!1)&&(n.removeClass("mc-active "+t.btnExtraClass),s(i),typeof t.changedCallBack=="function"&&t.changedCallBack.call(n,i)):n.hasClass("mc-active")||(t.changeCallBack==null||typeof t.changeCallBack=="function"&&t.changeCallBack()!==!1)&&(t.onlyActive&&(r.removeClass("mc-active "+t.btnExtraClass),s(c)),n.addClass("mc-active "+t.btnExtraClass),a(i),typeof t.changedCallBack=="function"&&t.changedCallBack.call(n,i))})}var t=$.extend({target:document,btnExtraClass:"active",defaultItem:"",event:"click",effect:"SH",onlyActive:!1,lessOneActive:!1,changeCallBack:null,changedCallBack:null,effectSpeed:200},n),r={startShowHide:function(n){n.show()},startFadeInOut:function(n){n.stop(!1,!0).fadeIn(t.effectSpeed)},startSlideDownUp:function(n){n.stop(!1,!0).slideDown(t.effectSpeed)},endShowHide:function(n){n.hide()},endFadeInOut:function(n){n.stop(!1,!0).fadeOut(t.effectSpeed)},endSlideDownUp:function(n){n.stop(!1,!0).slideUp(t.effectSpeed)}},c={FIO:r.startFadeInOut,SDU:r.startSlideDownUp},l={FIO:r.endFadeInOut,SDU:r.endSlideDownUp},i=null,u=null,f=null,e={},o,h;return i=$(t.target),u=i.find("[mc-efc-btn]"),f=i.find("[mc-efc-page]"),o=!t.lessOneActive,h={update:function(){i=$(t.target);u=i.find("[mc-efc-btn]");f=i.find("[mc-efc-page]");e={};u.each(function(n,t){var i=$(t),r=i.attr("mc-efc-page");e[r]={$btn:i,$page:f.filter("[mc-efc-page="+r+"]")}})}},v(),h};Mc.Util.dropMenuList=function(n,t){$(n).on("click","[mc-dropbtn]",function(){var i=$(this),s=i.attr("mc-dropbtn"),r=$("[mc-dropmenu="+s+"]"),e,u,n,o,f;if(r.hasClass("open"))i.removeClass("open"),r.removeClass("open").slideUp();else{if(t)for(e=$("[mc-dropbtn]"),u=$("[mc-dropmenu]"),n=0;n<u.length;n++)o=e.eq(n),f=u.eq(n),f.hasClass("open")&&(o.removeClass("open"),f.removeClass("open").slideUp());i.addClass("open");r.addClass("open").slideDown()}})};Mc.Util.IniFixCountDown=function(n){var t=$.extend({target:"#verify",fixTime:60,timeFormat:"%d",startCallback:null,endCallback:null,defaultTxt:"获取验证码"},n),i=this,r=$(t.target);this.timeCountDownState=!0;this.interValObj=null;this.start=function(){var n=[],u=t.fixTime>>0;n=t.timeFormat.split("%d");typeof n[2]!="undefined"&&console.error("不能有超过一个的%d出现");i.timeCountDownState&&(i.timeCountDownState=!1,t.startCallback!=null&&t.startCallback(),i.interValObj=window.setInterval(function(){u==1?(window.clearInterval(i.interValObj),r.html(t.defaultTxt),t.endCallback!=null&&t.endCallback(),i.timeCountDownState=!0):(u--,r.html(n[0]+u+n[1]))},1e3))};this.clean=function(){i.interValObj!=null&&(window.clearInterval(i.interValObj),r.html(t.defaultTxt),i.timeCountDownState=!0)};this.isCountDown=function(){return!this.timeCountDownState}};Mc.Util.Date.getCalendar=function(n){var o=new Date,r=$.extend({iYear:o.getFullYear(),iMonth:o.getMonth()+1,calHead:["日","一","二","三","四","五","六"]},n),t=[],f;t[0]=new Array(7);t[1]=new Array(7);t[2]=new Array(7);t[3]=new Array(7);t[4]=new Array(7);t[5]=new Array(7);t[6]=new Array(7);var s=new Date(r.iYear,r.iMonth-1,1),h=s.getDay(),c=Mc.Util.Date.getDaysInmonth(r.iYear,r.iMonth),u=1,i,e;for(f=0;f<7;f++)t[0][f]=r.calHead[f];for(i=h;i<7;i++)t[1][i]=u,u++;for(e=2;e<7;e++)for(i=0;i<7;i++)u<=c&&(t[e][i]=u,u++);return t};Mc.Util.Date.getDaysInmonth=function(n,t){var i=new Date(n,t,0);return i.getDate()};Mc.Util.isNull=function(n){return n==null||n===""||typeof n=="undefined"?!0:!1};Mc.Util.isNumber=function(n){return n==null||n===""||isNaN(n)||typeof n=="undefined"?!1:!0};Mc.Util.String.notNullOrEmpty=function(n){var i,t,r;if(n!==null&&n.length>0){for(t=0,r=n.length;t<r;t++)if(i=n[t],!i)return!1}else return!1;return!0};Mc.Util.String.isOnlyOne=function(n){return n instanceof Array==!1&&n};Mc.Util.Check.checkPhoneCode=function(n){var t;return Mc.Util.String.isOnlyOne(n)?(t=/^((\(\d{3}\))|(\d{3}\-))?13\d{9}|14[57]\d{8}|15\d{9}|18\d{9}|17\d{9}$/,n.length===11&&t.test(n)):!1};Mc.Util.Check.checkLandlinePhoneCode=function(n){var t;return Mc.Util.String.isOnlyOne(n)?(t=/(\d{4}-)?\d{6,8}/,t.test(n)):!1};Mc.Util.Check.checkMailCode=function(n){return n.match(/^[0-9A-Za-zd]+([-_.][A-Za-zd]+)*@([A-Za-zd0-9]+[-.])+[A-Za-zd]{2,5}$/)?!0:!1};Mc.Util.Check.checkIdcardCode=function(n){return n.match(/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/)?!0:!1};Mc.Util.Check.checkTelCode=function(n){return n.match(/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/)?!0:!1};Mc.Util.String.cmp=function(n,t){var i=[n,t];return Mc.Util.String.isNullOrEmpty(i)?n===t?!0:!1:!1};Mc.Util.Uri.goNextUrl=function(n){var t=Mc.Util.Uri.getSigleUrlParam("oldUrl"),i="";t!=null&&(n+=n.indexOf("?")==-1?"?":"&",i=n+"oldUrl="+encodeURIComponent(t),window.location.href=i)};Mc.Util.Uri.getUrlParamArray=function(){var i=location.search,r={},u,t,n;if(i.indexOf("?")!==-1)for(u=i.substr(1),t=u.split("&"),n=0;n<t.length;n++)r[t[n].split("=")[0]]=decodeURIComponent(t[n].split("=")[1]);return r};Mc.Util.Uri.getUrlParamByName=function(n){var i=new RegExp("(^|&)"+n+"=([^&]*)(&|$)"),t=window.location.search.substr(1).match(i);return t!=null?decodeURIComponent(t[2]):null};Mc.Util.Uri.goOldUrl=function(n){var t=Mc.Util.Uri.getUrlParam("oldUrl"),i="";t!=null?(i=decodeURIComponent(t),window.location.href=i):n!=null&&(window.location.href=n)};Mc.Util.Uri.goUrl=function(n){n=Mc.Util.Uri.getOldUrl(n);setTimeout(function(){window.location.href=n},1e3)};Mc.Util.Uri.getOldUrl=function(n){var t=encodeURIComponent(location.href);return n.indexOf("?")==-1&&(n+="?"),n+("oldUrl="+t)};Mc.Util.Date.dateFormatter=function(n,t){var u=n.replace(/yyyy/,this.getFullYear()),i=n.replace(/MM/,this.getMonth()>9?this.getMonth().toString():"0"+this.getMonth()),r=n.replace(/dd|DD/,this.getDate()>9?this.getDate().toString():"0"+this.getDate());return t===1?u+"-"+i+"-"+r:t===2?i+"-'"+r:!1};Mc.Util.String.getStrTrueLength=function(n){return n.replace(/[^x00-xff]/g,"xx").length};

// mc.verify
window.McVerify={};McVerify.addListener=function(n,t,i,r){var e=function(n){if(n.is("input")||n.is("textarea"))return n.val();if(n.is("img")){var i=n.attr("mc-default")||"",t=n.attr("src");return i===t?"":t}return n.text()},o=$(n),f=o.find("[mc-must]"),u=function(){if(t==="completemust"){var n=!0;f.each(function(t,i){var r=$(i);if(e(r)==="")return n=!1,!1});n?typeof i=="function"&&i():typeof r=="function"&&r()}};return f.each(function(n,t){var i=$(t);if(i.is("input")||i.is("textarea"))i.on("input",u)}),$(function(){u()}),{doCheck:function(){u()}}};McVerify.checkVal=function(n,t){var i=$(n),r=i.find("[mc-name="+t+"]")};McVerify.FormGetData=function(n,t,i){function k(n,t,i){var r,f,u,e;return i===null||i===""?!0:(r=!0,reg=w[t],reg?(f=s.base,r=f.verify(reg,i),r||McVerify.Error(n+f.msg(t))):(u=s.extend[t],u&&(e=u.verify,typeof e=="function"&&(r=e(i)),r||McVerify.Error(typeof u.msg=="function"&&u.msg()))),r)}var c,o,e,v,f;typeof i=="function"||(c=$.extend(!0,{},i),i=t,t=c);var l=i,a=$(n),y=a.find("[mc-name]"),u="",r={},p="",w={int:/^[\-|\+]?[0-9]*$/,"+int0":/^\+?[0-9][0-9]*$/,"+int":/^\+?[1-9][0-9]*$/,"-int":/^\-[1-9][0-9]*$/,float:/^(-?\d+)(\.\d+)?/,"+float":/^(([0-9]+\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\.[0-9]+)|([0-9]*[1-9][0-9]*))$/,"+floatwith2":/^(([1-9]\d*)|0)(\.\d{1,2})?$/,"-float":/^(-(([0-9]+\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\.[0-9]+)|([0-9]*[1-9][0-9]*)))$/,ip:/^(?:(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\.){3}(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])$/,email:/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]{2,5}$/,phone:/^(\(\d{3,4}\)|\d{3,4}-)?\d{7,8}$/,mobile:/^(0|86|17951)?(13[0-9]|15[012356789]|17[678]|18[0-9]|14[57])[0-9]{8}$/,idcard:/^(^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$)|(^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])((\d{4})|\d{3}[Xx])$)$/},b={int:"请输入正确的整数","+int0":"请输入正确的正整数","+int":"请输入正确的正整数","-int":"请输入正确的负整数",float:"请输入正确的正浮点数","+float":"请输入正确的正浮点数","+floatwith2":"请输入正确的数字（保留2位小数）","-float":"请输入正确的负浮点数",ip:"IP地址有误",email:"电子邮件地址有误",phone:"电话号码有误",mobile:"手机号码有误",idcard:"身份证号码有误"},s={base:{verify:function(n,t){return n.test(t)},msg:function(n){return b[n]}},extend:{}};if(t)for(f=0;f<t.length;f++)s.extend[t[f].name]=t[f].cont;var d=function(n,t,i,r){return k(n,i,r)?r?p:t?(McVerify.Error(n+"必填"),!1):(u=null,!0):!1},h=function(n){if(n.is("input")||n.is("textarea"))return n.val();if(n.is("img")){var i=n.attr("mc-default")||"",t=n.attr("src");return i===t?"":t}return n.text()},g=function(){var n=!0,t;return y.each(function(){var s,e,o,f=$(this),i,c,l;if(t=f.is("[mc-must]"),f.attr("mc-max")&&(e=parseInt(f.attr("mc-max"))),f.attr("mc-min")&&(o=parseInt(f.attr("mc-min"))),s=f.attr("mc-type"),i=f.attr("mc-name"),u=h(f),c=f.attr("mc-label")||"",l=d(c,t,s,u),l!==!1)s=="int"?(u=parseInt(u),e||o?(e&&o?u<=e&u>=o?r[i]=r[i]?r[i]+u:u:McVerify.Error("输入整数大小错误"):e?u<=e?r[i]=r[i]?r[i]+u:u:McVerify.Error("输入整数大小错误"):u>=o?r[i]=r[i]?r[i]+u:u:McVerify.Error("输入整数大小错误"),r[i]=r[i]?r[i]+","+(u?u:""):u):r[i]=r[i]?r[i]+","+(u?u:""):u):r[i]=r[i]?r[i]+","+(u?u:""):u;else return n=!1,!1}),n};if(g()){if(o=!0,e=a.find("[mc-check]"),e.length>1)for(v=h(e.eq(0)),f=1;f<e.length;f++)if(v!==h(e.eq(f))){o=!1;break}if(!o)if(typeof t.mcCheckCallBack=="function")McVerify.Error(t.mcCheckCallBack());else throw new"[mc-check]回调函数类型不是函数";if(o){if(typeof l=="function")return console.log(r),l(r),r;throw new"回调函数类型不是函数";}}else return null};McVerify.Error=function(n){console.log(n)};McVerify.FormSetData=function(n,t,i){var e=$(n),o=e.find("[mc-name]"),u=t,f=i,r,s=function(){if(o.each(function(){var n=$(this),t;r=n.attr("mc-name");u[r]!==null&&u[r]!==undefined&&(n.is("input")||n.is("textarea")?n.val(u[r]):n.is("img")?(t=n.attr("mc-default")||"",n.attr("src",u[r]===""?t:u[r])):n.html(u[r]))}),typeof f=="function")f();else return!0};return s()};

// mc.upload
(function(n,t){"use strict";n.Uploader=function(n){var i=t.extend({target:"",type:"image",name:"imagefile",compress:!0,auto:!1,acceptImage:[".png",".jpg",".jpeg",".gif",".bmp"],imageCompressWidth:1920,imageCompressHeight:1920,quality:80,imageCompressSize:0,imageMaxSize:8388608,acceptFile:[".png",".jpg",".jpeg",".gif",".bmp",".flv",".swf",".mkv",".avi",".rm",".rmvb",".mpeg",".mpg",".ogg",".ogv",".mov",".wmv",".mp4",".webm",".mp3",".wav",".mid",".rar",".zip",".tar",".gz",".7z",".bz2",".cab",".iso",".doc",".docx",".xls",".xlsx",".ppt",".pptx",".pdf",".txt",".md",".xml"],fileMaxSize:524288e3,iswater:!0,url:"",data:{},showLoadingFun:null,hideLoadingFun:null,successHideLoading:!0,beforeSend:null,success:null,fail:null,uploading:null,hasFailTip:!0},n),u=this,r=null,f;if(i.type==="image"?(f=(i.acceptImage||[]).join("").replace(/\./g,",").replace(/^[,]/,""),r=WebUploader.create({method:"POST",auto:i.auto,pick:{id:i.target},accept:{title:"Images",extensions:f,mimeTypes:"image/jpg,image/jpeg,image/png"},swf:"/webuploader-0.1.5/Uploader.swf",server:Mc.Config.imgUploadUrlPrefix+i.url+"?action=uploadimage",fileVal:i.name,duplicate:!0,fileSingleSizeLimit:i.imageMaxSize,compress:i.compress?{width:i.imageCompressWidth,height:i.imageCompressHeight,quality:i.quality,allowMagnify:!1,crop:!1,preserveHeaders:!0,compressSize:i.imageCompressSize}:!1}),u.imageUploader=r):i.type==="file"&&(f=(i.acceptFile||[]).join("").replace(/\./g,",").replace(/^[,]/,""),r=WebUploader.create({method:"POST",auto:i.auto,pick:{id:i.target},accept:{title:"File",extensions:f},swf:"/webuploader-0.1.5/Uploader.swf",server:Mc.Config.imgUploadUrlPrefix+i.url+"?action=uploadfile",fileVal:i.name,duplicate:!0,fileSingleSizeLimit:i.fileMaxSize}),u.fileUploader=r),r){u.imageUploader&&u.imageUploader.on("beforeFileQueued",function(n){return n.type.indexOf("png")!==-1&&n.size>2097152?(Mc.App.Pop.Tip({txtContent:"png格式的图片最大支持2M!"}),!1):!0});u.imageUploader&&u.imageUploader.on("uploadBeforeSend",function(n,r){r=t.extend(r,{iswater:i.iswater?!0:!1},i.data)});r.on("startUpload",function(){typeof i.showLoadingFun=="function"&&i.showLoadingFun()});r.on("uploadFinished",function(){typeof i.hideLoadingFun=="function"&&i.hideLoadingFun()});r.on("uploadProgress",function(n,t){typeof i.uploading=="function"&&i.uploading.call(this,n,t)});r.on("uploadSuccess",function(n,r){var u=t("#rt_"+n.source.ruid);i.successHideLoading&&typeof i.hideLoadingFun=="function"&&i.hideLoadingFun();r.issuccess?(Mc.DevelopMode&&(r.data.url=Mc.Config.imgUploadUrlPrefix+r.data.url),typeof i.success=="function"&&i.success.call(this,u,r,n)):(i.hasFailTip&&Mc.App.Pop.Tip({txtContent:"上传失败，请重新上传!"}),typeof i.fail=="function"&&i.fail.call(this,u,r,n))});r.on("uploadError",function(){typeof i.hideLoadingFun=="function"&&i.hideLoadingFun()});r.on("uploadComplete",function(){typeof i.hideLoadingFun=="function"&&i.hideLoadingFun()});r.on("error",function(){typeof i.hideLoadingFun=="function"&&i.hideLoadingFun()})}}})(window.Mc||(window.Mc={}),window.jQuery);
